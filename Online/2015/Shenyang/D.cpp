#include <bits/stdc++.h>
using namespace std;
#define ll long long
#define ull unsigned long long
#define pii pair<int, int>
#define pb push_back
#define mk make_pair
#define fi first
#define se second
#define ALL(A) A.begin(), A.end()
#define sqr(x) ((x)*(x))
#define sc(x) scanf("%d", &x)
#define pr(x) printf(">>>"#x":%d\n", x)
#define fastio ios::sync_with_stdio(0),cin.tie(0)
#define debug cout<<">>>STOP"<<endl
int prime[303] = {2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999};
int ans[303][11] = {{1,1,1,1,1,1,1,1,1,1,1},{1,2,2,1,1,1,1,2,1,1,1},{1,4,4,4,2,4,2,1,1,2,4},{1,6,1,5,4,2,3,6,1,1,2},{1,4,3,3,10,7,8,7,8,3,10},{1,12,7,4,9,3,7,3,12,10,8},{1,1,9,16,16,8,15,3,16,15,4},{1,4,12,16,2,14,13,18,8,1,17},{1,2,11,13,6,22,13,3,16,8,6},{1,27,18,27,21,17,13,15,3,2,15},{1,8,25,16,22,30,24,20,22,21,1},{1,32,32,32,1,10,5,32,35,11,22},{1,13,33,29,5,37,9,16,33,36,35},{1,42,9,33,41,7,41,14,38,23,3},{1,10,18,33,22,5,11,21,21,17,12},{1,26,20,15,4,43,43,22,2,20,51},{1,39,50,40,19,46,12,2,15,17,41},{1,32,48,22,26,6,43,29,19,17,55},{1,35,58,63,18,14,42,23,15,36,60},{1,70,14,9,22,36,26,10,64,12,49},{1,48,18,39,23,33,55,3,7,4,26},{1,1,71,61,46,40,24,58,58,69,23},{1,78,76,42,25,79,35,47,8,62,78},{1,64,51,29,85,7,12,21,23,51,79},{1,5,25,62,48,95,16,7,58,17,70},{1,20,31,11,14,86,98,53,58,10,54},{1,66,102,87,35,95,97,46,31,17,14},{1,7,29,46,11,53,60,3,94,59,69},{1,84,17,106,99,4,43,52,30,100,64},{1,22,29,63,13,23,83,60,18,62,105},{1,55,99,11,85,50,10,15,56,13,50},{1,6,99,81,98,37,20,119,11,89,102},{1,112,67,120,85,19,69,125,62,28,79},{1,53,7,49,122,135,73,33,44,95,104},{1,40,67,125,52,70,75,91,13,58,39},{1,59,89,42,11,111,127,148,142,73,23},{1,43,124,105,46,73,126,127,52,94,76},{1,109,127,21,102,83,71,155,3,68,68},{1,49,146,55,3,18,68,77,77,22,78},{1,113,40,149,152,31,146,73,31,103,20},{1,35,140,94,114,166,51,92,71,174,144},{1,82,138,39,65,103,99,33,2,53,76},{1,133,30,88,29,9,175,45,149,45,70},{1,123,28,70,70,28,58,148,189,29,148},{1,5,35,152,115,36,100,49,5,183,55},{1,71,78,113,151,94,144,42,44,8,142},{1,158,119,126,86,14,22,91,197,79,152},{1,50,170,117,63,192,152,138,195,89,123},{1,144,99,191,202,27,172,205,215,84,31},{1,117,17,17,16,71,40,173,194,183,199},{1,107,232,11,27,26,79,221,166,89,119},{1,193,233,2,197,168,60,97,49,203,90},{1,59,80,3,93,216,145,214,110,82,115},{1,39,5,127,230,171,229,93,152,3,36},{1,104,24,232,13,101,180,175,67,135,101},{1,180,106,8,183,238,256,150,204,85,241},{1,14,38,125,83,267,175,94,168,199,103},{1,201,33,263,158,42,159,63,225,72,116},{1,186,31,77,12,170,186,25,229,241,242},{1,204,174,273,78,145,81,194,237,104,207},{1,225,20,271,108,28,85,157,47,122,65},{1,233,235,101,131,50,239,22,88,226,28},{1,250,88,35,138,97,249,63,125,104,72},{1,42,289,305,249,14,80,193,250,118,113},{1,54,241,152,24,16,274,62,193,2,61},{1,26,238,84,237,4,184,90,308,6,197},{1,77,61,125,108,141,117,121,161,37,134},{1,121,45,141,202,321,132,68,73,82,38},{1,154,64,167,70,31,62,97,79,229,72},{1,101,89,95,142,124,120,98,288,16,265},{1,122,263,284,137,214,36,146,110,84,39},{1,297,310,245,173,117,111,193,144,147,333},{1,204,250,76,364,183,114,6,262,349,234},{1,248,109,345,171,5,189,309,102,140,351},{1,158,337,267,38,248,241,110,314,216,73},{1,5,9,115,46,335,14,342,157,271,249},{1,90,125,142,160,373,4,109,281,373,228},{1,25,195,266,203,120,72,219,311,48,286},{1,75,115,91,245,166,358,12,337,183,88},{1,211,85,183,94,61,138,129,358,268,22},{1,303,275,170,133,231,193,278,271,186,368},{1,235,157,162,144,379,269,17,332,54,21},{1,430,414,342,356,264,377,289,283,428,148},{1,145,78,304,348,234,409,220,171,56,243},{1,408,272,276,391,203,352,277,139,287,366},{1,39,210,300,392,142,349,84,61,38,234},{1,242,217,147,201,145,424,282,250,122,133},{1,342,311,423,135,299,141,443,131,267,209},{1,297,11,77,44,356,397,398,43,245,450},{1,215,236,119,95,30,41,106,455,373,178},{1,433,137,241,179,12,450,354,426,386,271},{1,271,79,105,189,198,286,233,427,311,67},{1,312,226,393,193,329,292,109,138,394,178},{1,441,389,39,93,379,407,302,44,104,169},{1,139,336,20,93,95,2,112,119,32,81},{1,217,462,61,300,338,207,460,131,272,282},{1,275,212,51,387,217,9,290,464,304,158},{1,191,188,421,452,144,67,447,15,290,112},{1,329,458,335,446,374,238,285,439,107,104},{1,39,111,123,304,79,352,261,285,417,218},{1,433,57,120,538,175,101,224,399,134,223},{1,356,386,33,332,420,174,324,196,364,169},{1,516,70,73,120,520,34,387,3,474,55},{1,307,207,303,462,217,408,268,110,326,169},{1,381,533,523,220,509,37,13,284,361,55},{1,425,160,467,344,96,497,62,56,565,25},{1,366,356,69,498,117,418,56,87,277,44},{1,154,345,81,73,192,266,319,97,575,337},{1,402,169,105,306,96,64,582,402,354,140},{1,485,362,508,270,301,245,5,428,564,96},{1,448,93,565,266,363,118,318,262,233,555},{1,283,85,251,88,278,347,119,607,522,163},{1,195,359,367,533,407,547,245,186,240,74},{1,506,436,525,106,394,328,429,321,7,370},{1,16,624,604,313,249,348,605,130,531,33},{1,616,210,13,424,434,215,423,425,6,158},{1,415,37,219,541,250,163,239,59,413,90},{1,145,363,421,310,70,125,119,240,442,111},{1,10,124,439,491,484,142,171,239,507,322},{1,94,249,389,639,391,339,418,536,155,341},{1,351,456,588,517,163,265,147,103,41,75},{1,192,395,550,578,418,598,531,96,142,615},{1,291,41,534,217,40,617,470,413,50,52},{1,286,36,105,40,558,343,669,625,473,131},{1,288,526,378,187,641,258,227,135,177,138},{1,629,231,177,93,27,368,264,307,139,162},{1,242,631,382,82,361,3,454,189,326,434},{1,677,549,129,557,74,18,454,19,550,589},{1,458,138,224,318,535,537,10,686,333,667},{1,697,710,150,429,558,245,369,337,70,728},{1,190,232,386,592,611,346,197,206,457,285},{1,621,416,383,521,732,742,643,295,536,598},{1,444,668,293,167,181,9,179,641,589,102},{1,544,612,569,164,440,211,378,542,547,195},{1,693,99,457,64,475,153,428,575,130,500},{1,246,592,286,166,708,718,721,632,581,134},{1,600,58,389,300,670,4,652,366,158,539},{1,247,288,246,316,387,745,147,336,581,103},{1,163,118,746,110,557,339,640,386,231,531},{1,600,743,798,565,168,80,344,274,436,141},{1,9,44,800,727,377,806,416,161,235,505},{1,633,358,148,120,323,85,30,87,561,105},{1,97,432,277,151,59,764,176,87,313,367},{1,74,813,413,796,243,230,532,774,47,217},{1,166,258,593,277,680,740,47,172,18,181},{1,793,635,218,387,786,94,89,379,377,237},{1,564,505,120,89,224,608,190,735,424,524},{1,816,47,222,18,135,847,638,759,697,547},{1,173,210,800,732,401,181,343,824,542,769},{1,623,137,114,481,738,316,216,116,240,260},{1,517,641,862,541,250,594,761,154,417,618},{1,646,274,65,237,205,266,93,546,141,313},{1,22,393,629,143,770,499,637,603,294,703},{1,243,529,545,859,267,619,191,722,195,186},{1,50,761,668,607,580,883,205,243,176,20},{1,242,769,865,367,221,698,140,124,423,506},{1,166,663,552,63,462,544,763,393,302,770},{1,301,901,539,506,100,148,366,402,436,898},{1,392,187,451,135,363,216,889,632,687,64},{1,747,399,405,63,241,277,334,746,377,121},{1,172,69,343,145,896,680,710,576,438,740},{1,145,30,387,387,191,15,472,146,299,415},{1,140,147,463,404,104,703,254,605,128,78},{1,702,381,179,20,789,970,325,326,858,591},{1,473,827,817,52,91,464,774,531,582,215},{1,288,536,736,139,18,525,43,654,712,294},{1,681,670,849,4,542,286,449,802,81,13},{1,716,4,449,314,975,629,882,764,536,281},{1,978,138,730,992,884,776,32,844,667,80},{1,559,575,704,210,105,755,536,176,107,620},{1,538,662,314,241,995,117,765,117,375,75},{1,953,623,2,549,974,259,455,710,142,453},{1,1026,961,237,474,393,308,349,783,459,377},{1,367,396,492,195,796,347,654,494,27,252},{1,347,752,757,533,458,774,151,748,241,105},{1,579,845,700,115,529,570,568,839,662,877},{1,671,59,1038,831,453,794,626,383,752,71},{1,436,634,592,892,942,795,316,317,28,31},{1,732,368,473,257,246,39,790,680,514,459},{1,466,314,435,797,35,764,67,45,523,1047},{1,174,875,293,736,206,896,640,858,443,722},{1,247,270,810,553,765,264,78,128,735,506},{1,847,759,127,70,967,489,698,689,697,523},{1,96,480,751,1044,299,802,687,708,712,986},{1,55,520,244,602,12,386,29,220,113,871},{1,1083,149,567,850,342,628,1006,942,383,966},{1,948,283,37,557,157,630,507,221,843,70},{1,877,258,933,324,13,441,875,924,669,1117},{1,527,407,333,820,713,619,601,692,273,774},{1,515,154,570,1034,1008,478,515,930,198,527},{1,246,944,323,736,541,126,1043,768,904,339},{1,272,569,712,440,796,1069,418,286,1032,160},{1,1130,621,929,273,137,567,3,246,795,710},{1,750,384,27,636,923,662,446,461,310,293},{1,707,967,185,460,1147,1150,1159,32,192,185},{1,215,956,3,488,483,321,221,720,849,19},{1,466,278,401,877,681,597,793,400,337,757},{1,472,375,729,433,972,723,695,599,959,1196},{1,567,363,1041,16,471,901,1179,319,731,313},{1,478,819,537,626,1144,1185,378,530,303,313},{1,792,254,137,953,1169,353,583,1140,451,315},{1,28,297,175,1021,1222,303,1186,889,691,1118},{1,217,73,19,87,448,1090,561,648,897,154},{1,1034,580,827,942,387,165,1063,929,472,360},{1,1252,930,227,291,322,690,919,307,384,402},{1,848,1194,255,173,742,309,394,1120,1122,118},{1,1270,544,84,796,1259,578,720,1142,891,937},{1,834,328,290,436,619,847,41,102,546,1150},{1,1209,580,320,1065,874,1166,500,953,316,692},{1,261,1119,621,763,930,476,83,85,1046,973},{1,590,1277,677,420,754,1220,1137,818,1062,912},{1,445,828,934,611,238,204,1143,262,601,88},{1,45,770,387,1024,906,320,285,46,659,515},{1,1289,15,338,475,225,961,774,1116,246,456},{1,788,793,458,1052,501,1042,1198,580,732,678},{1,652,691,1283,800,147,339,189,481,267,946},{1,74,1316,948,346,781,235,796,773,1320,672},{1,1182,499,469,1071,48,877,1013,1337,1223,747},{1,1348,675,1159,560,1131,102,95,146,132,266},{1,855,519,349,566,1282,990,557,988,773,462},{1,923,99,1343,1201,1375,374,446,273,1063,346},{1,786,858,1302,140,386,1259,826,1190,229,712},{1,212,1278,793,305,555,26,607,1397,354,983},{1,657,163,1400,993,816,949,673,1240,1065,68},{1,1129,1002,413,572,935,414,1379,492,1091,1149},{1,364,1370,139,1074,672,1207,271,721,846,481},{1,613,1049,1367,1349,357,873,778,1220,1143,952},{1,543,633,692,726,602,1128,1210,1281,1370,255},{1,1175,672,981,282,665,400,185,1051,601,517},{1,906,859,451,641,74,498,951,1126,188,1168},{1,778,1130,271,292,1400,1044,1326,437,1293,523},{1,1183,1005,828,394,166,1329,585,158,868,809},{1,1297,787,195,1286,481,208,448,1304,6,1256},{1,271,755,944,361,815,1462,1187,684,532,570},{1,459,1206,484,1281,1448,1305,902,535,342,1121},{1,1370,448,1226,1166,808,714,1260,426,98,986},{1,212,140,1178,1378,936,465,1173,1357,1060,484},{1,1040,1357,715,396,1184,1439,18,120,1202,166},{1,1167,191,1434,1041,1322,773,292,125,600,950},{1,88,737,581,1162,579,829,1403,282,1161,1163},{1,1353,419,31,603,26,1215,920,594,30,557},{1,159,1125,454,52,987,161,930,968,1228,444},{1,985,1194,618,7,1507,820,736,1158,598,1399},{1,1299,387,963,355,235,764,61,707,779,52},{1,893,1347,1493,919,1446,3,337,1478,1349,1003},{1,626,17,223,633,1545,1290,1366,853,602,431},{1,438,1007,551,1123,691,1434,176,625,1006,633},{1,537,1126,452,1160,21,1049,92,128,16,1100},{1,1449,838,284,1484,573,1398,853,1354,682,474},{1,1418,686,1115,407,197,455,564,531,984,347},{1,424,683,912,784,912,11,148,1388,1032,959},{1,1389,684,356,1383,373,222,515,1464,276,152},{1,1496,1112,1191,1186,1083,81,1229,229,513,703},{1,446,304,102,76,1452,1063,1065,515,539,1118},{1,1083,229,1094,946,299,464,1038,39,66,853},{1,1598,1560,1118,119,1548,589,23,115,716,570},{1,1338,429,763,980,824,204,1061,368,1467,408},{1,689,1214,153,607,689,1222,1084,1232,1367,226},{1,525,560,1312,1528,1463,829,28,277,734,102},{1,138,194,1300,1166,1151,317,1266,806,185,808},{1,730,608,926,1521,905,248,1434,557,549,231},{1,1090,258,778,765,1240,765,1105,859,1332,1561},{1,1589,887,177,1566,384,662,1149,418,264,169},{1,1042,617,193,954,1017,987,456,1316,497,681},{1,944,1669,557,76,679,1393,887,1092,254,64},{1,1557,1399,163,190,1282,1311,939,793,611,1299},{1,1536,1155,867,531,972,158,1122,378,1300,173},{1,1199,347,1334,999,1190,1591,735,1679,954,308},{1,187,242,162,573,1592,85,1709,327,709,1483},{1,205,690,1461,1336,244,1727,1665,1129,421,925},{1,1052,1115,940,81,1393,897,346,682,384,1717},{1,87,1719,82,1255,422,3,68,1004,593,1155},{1,1531,1512,284,395,367,971,233,1121,1371,1405},{1,663,1328,1483,1652,575,850,1429,625,282,1511},{1,1061,218,465,374,611,1479,625,733,1702,91},{1,1044,1127,1404,1032,922,1399,340,1353,168,1697},{1,1343,1074,104,148,1637,1167,1004,182,536,1389},{1,1738,1386,1590,355,779,204,659,1455,171,1264},{1,299,461,1455,770,267,15,1348,591,1600,1118},{1,384,1598,1727,1513,1503,1733,501,1478,1590,384},{1,684,1686,107,860,1519,1232,1721,661,704,1227},{1,1287,1287,1569,1481,1676,1279,386,1593,15,1135},{1,1736,306,1135,1260,1040,1650,1813,106,1670,393},{1,1403,1277,794,968,706,1628,1307,1565,1471,1506},{1,1130,144,1464,898,957,112,1856,1758,638,1143},{1,613,606,1482,619,956,359,829,19,1593,375},{1,968,244,1560,486,77,796,1759,849,1593,1766},{1,512,75,537,1210,1559,346,1191,336,1359,476},{1,1077,339,990,1739,1304,1631,870,267,1208,877},{1,1698,1648,1808,1572,319,639,1452,1844,1171,1724},{1,1459,1289,925,774,1215,1685,854,1742,1647,664},{1,1091,268,1086,1750,877,32,410,1006,60,1369},{1,906,445,345,323,843,253,259,631,1500,3},{1,1618,977,1597,642,1089,1675,1171,975,970,1368},{1,907,1836,372,1762,43,1841,307,756,433,59},{1,1465,1487,700,94,1710,920,454,1761,384,217},{1,1118,531,691,453,1468,886,1876,1325,932,480},{1,1968,629,42,1803,938,903,1445,384,910,712},{1,241,394,855,1045,531,1256,1786,1902,90,613},{1,1745,1760,660,1815,1955,1974,1716,1539,534,1849},{1,1941,1297,646,1784,771,1600,1825,865,75,942},{1,1963,650,230,1494,12,1147,219,482,1925,1301},{1,1391,1075,955,216,456,1278,1453,1754,928,95}};
template<class T> T gcd(T a, T b){if(!b)return a;return gcd(b,a%b);}
const int maxn = 5e8+10;
const int maxm = 5e4+10;
const int part = 5e7;
bool f[maxm];
int g[part+10];
vector<int> vec;

void init()
{
    for(int i = 2; (ll)i*i < maxn; i++){
        if(!f[i]){
            vec.pb(i);
            for(int j = i*2; j*j < maxn; j += i)f[j] = 1;
        }   
    }
}

int main()
{
    init();
    int T, kase = 1;
    sc(T);
    while(T--){
        int n, m;
        scanf("%d%d", &n, &m);
        int id = lower_bound(ALL(vec), m)-vec.begin();
        int ret = ans[id][n/part];
        int l = n/part*part, r = n; //(l, r];
        for(auto u : vec){
            int j = l/u*u;
            while(j <= l || j <= u)j += u;
            for(; j <= r; j += u)g[j-l] = kase;
        }
        for(int i = max(2, l+1); i <= r; i++){
            if(g[i-l] != kase && i != m)ret = 1LL*ret*i%m;
        }
        printf("Case #%d: %d\n", kase++, ret);
    }
    return 0;
}


//const int maxn = 5e8+100;
//bool f[maxn];
//vector<int> prime;
//int out1[303];
//int out2[303][52];
//void init()
//{
    //for(int i = 2; i < maxn; i++){
        //if(!f[i]){
            //prime.pb(i);
            //for(int j = 2*i; j < maxn; j += i)f[j] = 1;
        //}
    //}
    //int cnt = 0;
    //for(auto u : prime){
        //if(u <= 2000)out1[cnt++] = u;
        //else break;
    //}
//}

//int main()
//{
    //init();
    //for(int i = 0; i < 303; i++){
        //ll now = 1, cnt = 0, cnt_prime = 0;
        //while(cnt < 11){
            //if(prime[cnt_prime] > cnt*5e7){
                //out2[i][cnt++] = now;
            //}
            //if(cnt_prime!=i)now = now*prime[cnt_prime++]%prime[i];
            //else cnt_prime++;
        //}
    //}
    //printf("int prime[303] = {");
    //for(int i = 0; i < 303; i++){
        //printf("%d%c", out1[i], ",}"[i==302]);
    //}
    //puts(";");
    //printf("int ans[303][11] = {");
    //for(int i = 0; i < 303; i++){
        //printf("{");
        //for(int j = 0; j < 11; j++){
            //printf("%d%c", out2[i][j], ",}"[j==10]);
        //}
        //printf("%c", ",}"[i==302]);
    //}
    //puts(";");
    //return 0;
//}

